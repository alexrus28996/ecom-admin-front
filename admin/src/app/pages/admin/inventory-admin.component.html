<ng-container *ngIf="permissions$ | async as perms">
  <div class="page inventory-page">
    <div class="inventory-header">
      <div class="inventory-header__titles">
        <span class="page__eyebrow">Inventory</span>
        <h1>Inventory management</h1>
        <p>Monitor stock positions, reservations, transfers, and ledger activity across every location.</p>
      </div>
      <div class="inventory-header__actions">
        <button mat-stroked-button color="primary" type="button" (click)="loadStock(); loadLowStock(); loadReservations(); loadTransfers(); loadLedger(); loadLocationsTable()">
          <mat-icon>refresh</mat-icon>
          Refresh
        </button>
        <button mat-flat-button color="primary" type="button" *ngIf="perms.adjust" (click)="openAdjustmentDialog()">
          <mat-icon>tune</mat-icon>
          New adjustment
        </button>
        <button mat-flat-button color="primary" type="button" *ngIf="perms.transfer" (click)="openTransferDialog()">
          <mat-icon>swap_horiz</mat-icon>
          Create transfer
        </button>
      </div>
    </div>

    <mat-card class="inventory-card">
      <mat-card-content>
        <mat-tab-group [(selectedIndex)]="selectedTab" (selectedIndexChange)="onTabChange($event)" class="inventory-tabs">
          <mat-tab label="All inventory">
            <section class="tab-section">
              <form [formGroup]="stockFilters" class="filter-form" (ngSubmit)="loadStock()">
                <mat-form-field appearance="outline">
                  <mat-label>Product</mat-label>
                  <input matInput formControlName="product" placeholder="Search by name or SKU" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Variant</mat-label>
                  <input matInput formControlName="variant" placeholder="Variant name or SKU" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Location</mat-label>
                  <mat-select formControlName="locationId">
                    <mat-option value="">All locations</mat-option>
                    <mat-option *ngFor="let location of locationOptions" [value]="location._id">{{ location.name }}</mat-option>
                  </mat-select>
                </mat-form-field>
                <div class="filter-form__actions">
                  <button mat-stroked-button type="button" (click)="stockFilters.reset(); loadStock()">Clear</button>
                  <button mat-flat-button color="primary" type="submit">Apply</button>
                </div>
              </form>

              <div class="table-wrapper" [class.table-wrapper--loading]="stockState.loading">
                <mat-progress-bar *ngIf="stockState.loading" mode="indeterminate"></mat-progress-bar>
                <table
                  mat-table
                  [dataSource]="stockState.items"
                  class="inventory-table"
                  *ngIf="!stockState.loading && stockState.items.length"
                >
                  <ng-container matColumnDef="product">
                    <th mat-header-cell *matHeaderCellDef>Product</th>
                    <td mat-cell *matCellDef="let row">
                      <div class="cell-product">
                        <div class="cell-product__name">{{ row.productName }}</div>
                        <div class="cell-product__variant" *ngIf="row.variantName">{{ row.variantName }}</div>
                      </div>
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="location">
                    <th mat-header-cell *matHeaderCellDef>Location</th>
                    <td mat-cell *matCellDef="let row">{{ row.locationName || '—' }}</td>
                  </ng-container>

                  <ng-container matColumnDef="onHand">
                    <th mat-header-cell *matHeaderCellDef>On hand</th>
                    <td mat-cell *matCellDef="let row">{{ row.onHand }}</td>
                  </ng-container>

                  <ng-container matColumnDef="reserved">
                    <th mat-header-cell *matHeaderCellDef>Reserved</th>
                    <td mat-cell *matCellDef="let row">{{ row.reserved }}</td>
                  </ng-container>

                  <ng-container matColumnDef="available">
                    <th mat-header-cell *matHeaderCellDef>Available</th>
                    <td mat-cell *matCellDef="let row">{{ row.available }}</td>
                  </ng-container>

                  <ng-container matColumnDef="updatedAt">
                    <th mat-header-cell *matHeaderCellDef>Updated</th>
                    <td mat-cell *matCellDef="let row">{{ row.updatedAt | date: 'short' }}</td>
                  </ng-container>

                  <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let row" class="cell-actions">
                      <button mat-icon-button color="primary" aria-label="Adjust stock" *ngIf="perms.adjust" (click)="openAdjustmentDialog(row)">
                        <mat-icon>tune</mat-icon>
                      </button>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="['product', 'location', 'onHand', 'reserved', 'available', 'updatedAt', 'actions']"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: ['product', 'location', 'onHand', 'reserved', 'available', 'updatedAt', 'actions']; trackBy: trackById"
                    [ngClass]="{
                      'inventory-row--low': row.status === 'low',
                      'inventory-row--out': row.status === 'out'
                    }"
                  ></tr>
                </table>
                <div class="empty-state" *ngIf="!stockState.loading && !stockState.items.length">
                  <mat-icon>inventory_2</mat-icon>
                  <p>No inventory records match your filters.</p>
                </div>
                <div class="error-state" *ngIf="stockState.error">
                  <mat-icon>error</mat-icon>
                  <p>{{ stockState.error }}</p>
                </div>
              </div>
              <mat-paginator
                [length]="stockState.total"
                [pageSize]="stockState.pageSize"
                [pageIndex]="stockState.pageIndex"
                [pageSizeOptions]="[10, 25, 50]"
                (page)="pageStock($event)"
              ></mat-paginator>
            </section>
          </mat-tab>

          <mat-tab label="Low stock">
            <section class="tab-section">
              <form [formGroup]="lowFilters" class="filter-form" (ngSubmit)="loadLowStock()">
                <mat-form-field appearance="outline">
                  <mat-label>Product</mat-label>
                  <input matInput formControlName="product" placeholder="Search by name or SKU" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Variant</mat-label>
                  <input matInput formControlName="variant" placeholder="Variant name or SKU" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Location</mat-label>
                  <mat-select formControlName="locationId">
                    <mat-option value="">All locations</mat-option>
                    <mat-option *ngFor="let location of locationOptions" [value]="location._id">{{ location.name }}</mat-option>
                  </mat-select>
                </mat-form-field>
                <div class="filter-form__actions">
                  <button mat-stroked-button type="button" (click)="lowFilters.reset(); loadLowStock()">Clear</button>
                  <button mat-flat-button color="primary" type="submit">Apply</button>
                </div>
              </form>

              <div class="table-wrapper" [class.table-wrapper--loading]="lowState.loading">
                <mat-progress-bar *ngIf="lowState.loading" mode="indeterminate"></mat-progress-bar>
                <table mat-table [dataSource]="lowState.items" class="inventory-table" *ngIf="!lowState.loading && lowState.items.length">
                  <ng-container matColumnDef="product">
                    <th mat-header-cell *matHeaderCellDef>Product</th>
                    <td mat-cell *matCellDef="let row">
                      <div class="cell-product">
                        <div class="cell-product__name">{{ row.productName }}</div>
                        <div class="cell-product__variant" *ngIf="row.variantName">{{ row.variantName }}</div>
                      </div>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="location">
                    <th mat-header-cell *matHeaderCellDef>Location</th>
                    <td mat-cell *matCellDef="let row">{{ row.locationName || '—' }}</td>
                  </ng-container>
                  <ng-container matColumnDef="available">
                    <th mat-header-cell *matHeaderCellDef>Available</th>
                    <td mat-cell *matCellDef="let row">{{ row.available }}</td>
                  </ng-container>
                  <ng-container matColumnDef="onHand">
                    <th mat-header-cell *matHeaderCellDef>On hand</th>
                    <td mat-cell *matCellDef="let row">{{ row.onHand }}</td>
                  </ng-container>
                  <ng-container matColumnDef="reserved">
                    <th mat-header-cell *matHeaderCellDef>Reserved</th>
                    <td mat-cell *matCellDef="let row">{{ row.reserved }}</td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="['product', 'location', 'available', 'onHand', 'reserved']"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: ['product', 'location', 'available', 'onHand', 'reserved']; trackBy: trackById"
                    class="inventory-row--low"
                  ></tr>
                </table>
                <div class="empty-state" *ngIf="!lowState.loading && !lowState.items.length">
                  <mat-icon>notifications</mat-icon>
                  <p>No products are currently below their threshold.</p>
                </div>
                <div class="error-state" *ngIf="lowState.error">
                  <mat-icon>error</mat-icon>
                  <p>{{ lowState.error }}</p>
                </div>
              </div>
              <mat-paginator
                [length]="lowState.total"
                [pageSize]="lowState.pageSize"
                [pageIndex]="lowState.pageIndex"
                [pageSizeOptions]="[10, 25, 50]"
                (page)="pageLow($event)"
              ></mat-paginator>
            </section>
          </mat-tab>

          <mat-tab label="Reservations">
            <section class="tab-section">
              <form [formGroup]="reservationFilters" class="filter-form" (ngSubmit)="loadReservations()">
                <mat-form-field appearance="outline">
                  <mat-label>Product</mat-label>
                  <input matInput formControlName="product" placeholder="Search by name or SKU" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Status</mat-label>
                  <mat-select formControlName="status">
                    <mat-option *ngFor="let status of reservationStatusOptions" [value]="status">{{ status }}</mat-option>
                  </mat-select>
                </mat-form-field>
                <div class="filter-form__actions">
                  <button mat-stroked-button type="button" (click)="reservationFilters.reset({ product: '', status: 'ALL' }); loadReservations()">Clear</button>
                  <button mat-flat-button color="primary" type="submit">Apply</button>
                </div>
              </form>

              <div class="table-wrapper" [class.table-wrapper--loading]="reservationState.loading">
                <mat-progress-bar *ngIf="reservationState.loading" mode="indeterminate"></mat-progress-bar>
                <table
                  mat-table
                  [dataSource]="reservationState.items"
                  class="inventory-table"
                  *ngIf="!reservationState.loading && reservationState.items.length"
                >
                  <ng-container matColumnDef="order">
                    <th mat-header-cell *matHeaderCellDef>Order</th>
                    <td mat-cell *matCellDef="let row">{{ row.orderId || '—' }}</td>
                  </ng-container>
                  <ng-container matColumnDef="product">
                    <th mat-header-cell *matHeaderCellDef>Product</th>
                    <td mat-cell *matCellDef="let row">
                      <div class="cell-product">
                        <div class="cell-product__name">{{ row.productName }}</div>
                        <div class="cell-product__variant" *ngIf="row.variantName">{{ row.variantName }}</div>
                      </div>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="qty">
                    <th mat-header-cell *matHeaderCellDef>Reserved qty</th>
                    <td mat-cell *matCellDef="let row">{{ row.reservedQty }}</td>
                  </ng-container>
                  <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef>Status</th>
                    <td mat-cell *matCellDef="let row">{{ row.status }}</td>
                  </ng-container>
                  <ng-container matColumnDef="expires">
                    <th mat-header-cell *matHeaderCellDef>Expires</th>
                    <td mat-cell *matCellDef="let row">{{ row.expiresAt ? (row.expiresAt | date: 'short') : '—' }}</td>
                  </ng-container>
                  <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef></th>
                    <td mat-cell *matCellDef="let row">
                      <button mat-stroked-button color="primary" type="button" *ngIf="perms.adjust" (click)="releaseReservation(row)">
                        Release
                      </button>
                    </td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="['order', 'product', 'qty', 'status', 'expires', 'actions']"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: ['order', 'product', 'qty', 'status', 'expires', 'actions']; trackBy: trackById"
                    [ngClass]="{ 'reservation-row--expired': row.isExpired }"
                  ></tr>
                </table>
                <div class="empty-state" *ngIf="!reservationState.loading && !reservationState.items.length">
                  <mat-icon>event_busy</mat-icon>
                  <p>No reservations match your filters.</p>
                </div>
                <div class="error-state" *ngIf="reservationState.error">
                  <mat-icon>error</mat-icon>
                  <p>{{ reservationState.error }}</p>
                </div>
              </div>
              <mat-paginator
                [length]="reservationState.total"
                [pageSize]="reservationState.pageSize"
                [pageIndex]="reservationState.pageIndex"
                [pageSizeOptions]="[10, 25, 50]"
                (page)="pageReservations($event)"
              ></mat-paginator>
            </section>
          </mat-tab>

          <mat-tab label="Transfers">
            <section class="tab-section">
              <form [formGroup]="transferFilters" class="filter-form" (ngSubmit)="loadTransfers()">
                <mat-form-field appearance="outline">
                  <mat-label>Status</mat-label>
                  <mat-select formControlName="status">
                    <mat-option value="">All statuses</mat-option>
                    <mat-option *ngFor="let status of transferStatuses" [value]="status">{{ status }}</mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>From location</mat-label>
                  <mat-select formControlName="fromLocationId">
                    <mat-option value="">Any</mat-option>
                    <mat-option *ngFor="let location of locationOptions" [value]="location._id">{{ location.name }}</mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>To location</mat-label>
                  <mat-select formControlName="toLocationId">
                    <mat-option value="">Any</mat-option>
                    <mat-option *ngFor="let location of locationOptions" [value]="location._id">{{ location.name }}</mat-option>
                  </mat-select>
                </mat-form-field>
                <div class="filter-form__actions">
                  <button mat-stroked-button type="button" (click)="transferFilters.reset({ status: '', fromLocationId: '', toLocationId: '' }); loadTransfers()">Clear</button>
                  <button mat-flat-button color="primary" type="submit">Apply</button>
                </div>
              </form>

              <div class="table-wrapper" [class.table-wrapper--loading]="transferState.loading">
                <mat-progress-bar *ngIf="transferState.loading" mode="indeterminate"></mat-progress-bar>
                <table mat-table [dataSource]="transferState.items" class="inventory-table" *ngIf="!transferState.loading && transferState.items.length">
                  <ng-container matColumnDef="from">
                    <th mat-header-cell *matHeaderCellDef>From</th>
                    <td mat-cell *matCellDef="let row">{{ row.fromLocationName }}</td>
                  </ng-container>
                  <ng-container matColumnDef="to">
                    <th mat-header-cell *matHeaderCellDef>To</th>
                    <td mat-cell *matCellDef="let row">{{ row.toLocationName }}</td>
                  </ng-container>
                  <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef>Status</th>
                    <td mat-cell *matCellDef="let row">
                      <ng-container *ngIf="perms.transferUpdate; else statusLabel">
                        <mat-select [value]="row.status" (selectionChange)="updateTransferStatus(row, $event.value)" class="status-select">
                          <mat-option *ngFor="let status of transferStatuses" [value]="status">{{ status }}</mat-option>
                        </mat-select>
                      </ng-container>
                      <ng-template #statusLabel>{{ row.status }}</ng-template>
                    </td>
                  </ng-container>
                  <ng-container matColumnDef="created">
                    <th mat-header-cell *matHeaderCellDef>Created</th>
                    <td mat-cell *matCellDef="let row">{{ row.createdAt | date: 'short' }}</td>
                  </ng-container>
                  <ng-container matColumnDef="lines">
                    <th mat-header-cell *matHeaderCellDef>Lines</th>
                    <td mat-cell *matCellDef="let row">{{ row.linesSummary }}</td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="['from', 'to', 'status', 'created', 'lines']"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: ['from', 'to', 'status', 'created', 'lines']; trackBy: trackById"
                  ></tr>
                </table>
                <div class="empty-state" *ngIf="!transferState.loading && !transferState.items.length">
                  <mat-icon>swap_horiz</mat-icon>
                  <p>No transfers match your filters.</p>
                </div>
                <div class="error-state" *ngIf="transferState.error">
                  <mat-icon>error</mat-icon>
                  <p>{{ transferState.error }}</p>
                </div>
              </div>
              <mat-paginator
                [length]="transferState.total"
                [pageSize]="transferState.pageSize"
                [pageIndex]="transferState.pageIndex"
                [pageSizeOptions]="[10, 25, 50]"
                (page)="pageTransfers($event)"
              ></mat-paginator>
            </section>
          </mat-tab>

          <mat-tab label="Ledger">
            <section class="tab-section">
              <form [formGroup]="ledgerFilters" class="filter-form" (ngSubmit)="loadLedger()">
                <mat-form-field appearance="outline">
                  <mat-label>Product</mat-label>
                  <input matInput formControlName="product" placeholder="Search by name or SKU" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Location</mat-label>
                  <mat-select formControlName="locationId">
                    <mat-option value="">All</mat-option>
                    <mat-option *ngFor="let location of locationOptions" [value]="location._id">{{ location.name }}</mat-option>
                  </mat-select>
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>From date</mat-label>
                  <input matInput type="date" formControlName="from" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>To date</mat-label>
                  <input matInput type="date" formControlName="to" />
                </mat-form-field>
                <div class="filter-form__actions">
                  <button mat-stroked-button type="button" (click)="ledgerFilters.reset({ product: '', locationId: '', from: '', to: '' }); loadLedger()">Clear</button>
                  <button mat-flat-button color="primary" type="submit">Apply</button>
                </div>
              </form>

              <div class="table-wrapper" [class.table-wrapper--loading]="ledgerState.loading">
                <mat-progress-bar *ngIf="ledgerState.loading" mode="indeterminate"></mat-progress-bar>
                <table mat-table [dataSource]="ledgerState.items" class="inventory-table" *ngIf="!ledgerState.loading && ledgerState.items.length">
                  <ng-container matColumnDef="product">
                    <th mat-header-cell *matHeaderCellDef>Product</th>
                    <td mat-cell *matCellDef="let row">{{ row.productName }}</td>
                  </ng-container>
                  <ng-container matColumnDef="variant">
                    <th mat-header-cell *matHeaderCellDef>Variant</th>
                    <td mat-cell *matCellDef="let row">{{ row.variantName || '—' }}</td>
                  </ng-container>
                  <ng-container matColumnDef="qty">
                    <th mat-header-cell *matHeaderCellDef>Quantity</th>
                    <td mat-cell *matCellDef="let row">{{ row.quantity }}</td>
                  </ng-container>
                  <ng-container matColumnDef="direction">
                    <th mat-header-cell *matHeaderCellDef>Direction</th>
                    <td mat-cell *matCellDef="let row">{{ row.direction }}</td>
                  </ng-container>
                  <ng-container matColumnDef="reason">
                    <th mat-header-cell *matHeaderCellDef>Reason</th>
                    <td mat-cell *matCellDef="let row">{{ row.reason || '—' }}</td>
                  </ng-container>
                  <ng-container matColumnDef="location">
                    <th mat-header-cell *matHeaderCellDef>Location</th>
                    <td mat-cell *matCellDef="let row">{{ row.locationName || '—' }}</td>
                  </ng-container>
                  <ng-container matColumnDef="occurred">
                    <th mat-header-cell *matHeaderCellDef>Occurred</th>
                    <td mat-cell *matCellDef="let row">{{ row.occurredAt | date: 'short' }}</td>
                  </ng-container>
                  <ng-container matColumnDef="actor">
                    <th mat-header-cell *matHeaderCellDef>Actor</th>
                    <td mat-cell *matCellDef="let row">{{ row.actor || '—' }}</td>
                  </ng-container>
                  <tr mat-header-row *matHeaderRowDef="['product', 'variant', 'qty', 'direction', 'reason', 'location', 'occurred', 'actor']"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: ['product', 'variant', 'qty', 'direction', 'reason', 'location', 'occurred', 'actor']; trackBy: trackById"
                  ></tr>
                </table>
                <div class="empty-state" *ngIf="!ledgerState.loading && !ledgerState.items.length">
                  <mat-icon>history</mat-icon>
                  <p>No ledger entries match your filters.</p>
                </div>
                <div class="error-state" *ngIf="ledgerState.error">
                  <mat-icon>error</mat-icon>
                  <p>{{ ledgerState.error }}</p>
                </div>
              </div>
              <mat-paginator
                [length]="ledgerState.total"
                [pageSize]="ledgerState.pageSize"
                [pageIndex]="ledgerState.pageIndex"
                [pageSizeOptions]="[10, 25, 50]"
                (page)="pageLedger($event)"
              ></mat-paginator>
            </section>
          </mat-tab>
        </mat-tab-group>
      </mat-card-content>
    </mat-card>

    <mat-card class="inventory-card inventory-card--locations">
      <mat-card-header>
        <div mat-card-avatar class="inventory-card__icon">
          <mat-icon>warehouse</mat-icon>
        </div>
        <mat-card-title>Locations</mat-card-title>
        <mat-card-subtitle>Manage storage and fulfilment locations.</mat-card-subtitle>
        <span class="inventory-card__spacer"></span>
        <button mat-stroked-button color="primary" type="button" *ngIf="perms.locationCreate" (click)="openLocationDialog()">
          <mat-icon>add</mat-icon>
          Add location
        </button>
      </mat-card-header>
      <mat-card-content>
        <div class="table-wrapper" [class.table-wrapper--loading]="locationState.loading">
          <mat-progress-bar *ngIf="locationState.loading" mode="indeterminate"></mat-progress-bar>
          <table mat-table [dataSource]="locationState.items" class="inventory-table" *ngIf="!locationState.loading && locationState.items.length">
            <ng-container matColumnDef="code">
              <th mat-header-cell *matHeaderCellDef>Code</th>
              <td mat-cell *matCellDef="let row">{{ row.code }}</td>
            </ng-container>
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let row">{{ row.name }}</td>
            </ng-container>
            <ng-container matColumnDef="type">
              <th mat-header-cell *matHeaderCellDef>Type</th>
              <td mat-cell *matCellDef="let row">{{ row.type || '—' }}</td>
            </ng-container>
            <ng-container matColumnDef="priority">
              <th mat-header-cell *matHeaderCellDef>Priority</th>
              <td mat-cell *matCellDef="let row">{{ row.priority ?? '—' }}</td>
            </ng-container>
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Status</th>
              <td mat-cell *matCellDef="let row">
                <span class="badge" [class.badge--inactive]="!row.active">{{ row.active ? 'Active' : 'Inactive' }}</span>
              </td>
            </ng-container>
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let row" class="cell-actions">
                <button mat-icon-button color="primary" type="button" *ngIf="perms.locationEdit" (click)="openLocationDialog(getLocationEntity(row.id))">
                  <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button color="warn" type="button" *ngIf="perms.locationDelete && row.active" (click)="deleteLocation(row)">
                  <mat-icon>delete</mat-icon>
                </button>
                <button mat-stroked-button color="primary" type="button" *ngIf="perms.locationEdit && !row.active" (click)="restoreLocation(row)">
                  Restore
                </button>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="['code', 'name', 'type', 'priority', 'status', 'actions']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['code', 'name', 'type', 'priority', 'status', 'actions']; trackBy: trackById"></tr>
          </table>
          <div class="empty-state" *ngIf="!locationState.loading && !locationState.items.length">
            <mat-icon>warehouse</mat-icon>
            <p>No locations have been configured yet.</p>
          </div>
          <div class="error-state" *ngIf="locationState.error">
            <mat-icon>error</mat-icon>
            <p>{{ locationState.error }}</p>
          </div>
        </div>
        <mat-paginator
          [length]="locationState.total"
          [pageSize]="locationState.pageSize"
          [pageIndex]="locationState.pageIndex"
          [pageSizeOptions]="[10, 25, 50]"
          (page)="pageLocations($event)"
        ></mat-paginator>
      </mat-card-content>
    </mat-card>
  </div>
</ng-container>
